(function(t){"use strict";var e;(function(){var t;return e=function(n){var i,r;if(n)for(r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);i={preserveWhitespace:!1,append:!1,twoway:!0,formatters:{},modifyArrays:!0};for(r in i)i.hasOwnProperty(r)&&void 0===this[r]&&(this[r]=i[r]);if(void 0!==this.el&&(this.el=t(this.el)),this._subs={},this.deferredAttributes=[],void 0===this.viewmodel&&(this.viewmodel=new e.ViewModel),this.viewmodel.dependents.push(this),this.data&&this.viewmodel.set(this.data),this.partials)for(r in this.partials)if(this.partials.hasOwnProperty(r)&&"string"==typeof this.partials[r]){if(!e.compile)throw Error('Missing Ractive.compile - cannot compile partial "'+r+'". Either precompile or use the version that includes the compiler');this.partials[r]=e.compile(this.partials[r],this)}if("string"==typeof this.template){if(!e.compile)throw Error("Missing Ractive.compile - cannot compile template. Either precompile or use the version that includes the compiler");this.template=e.compile(this.template,this)}this.template&&1===this.template.length&&"string"==typeof this.template[0]&&(this.template=this.template[0]),this.el&&this.render({el:this.el,callback:this.callback,append:this.append})},e.prototype={render:function(e){var i=e.el?t(e.el):this.el;if(!i)throw Error("You must specify a DOM element to render to");e.append||(i.innerHTML=""),e.callback&&(this.callback=e.callback),this.rendered=new n.DomFragment({model:this.template,root:this,parentNode:i}),i.appendChild(this.rendered.docFrag)},teardown:function(){this.rendered.teardown()},set:function(){return this.viewmodel.set.apply(this.viewmodel,arguments),this},get:function(){return this.viewmodel.get.apply(this.viewmodel,arguments)},update:function(){return this.viewmodel.update.apply(this.viewmodel,arguments),this},link:function(t){var e=this;return function(n){e.set(t,n)}},_format:function(t,n){var i,r,o,s,a,h;if(!n)return t;for(r=n.length,i=0;r>i;i+=1)o=n[i],s=o.name,a=o.args||[],h=this.formatters[s]||e.formatters[s],h&&(t=h.apply(this,[t].concat(a)));return t}},t=function(t){var e,n;if("undefined"!=typeof window){if(n=window.document,!t)throw Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=n.getElementById(t),!e&&n.querySelector&&(e=n.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw Error("Could not find container element")}},e})();var n;(function(){n={isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}}})(),n.types={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTR_VALUE_TOKEN:13},function(t){t._Mustache=function(t){this.root=t.root,this.model=t.model,this.viewmodel=t.root.viewmodel,this.parent=t.parent,this.parentFragment=t.parentFragment,this.contextStack=t.contextStack||[],this.index=t.index||0,(t.parentNode||t.anchor)&&(this.parentNode=t.parentNode,this.anchor=t.anchor),this.type=t.model.type,this.viewmodel.registerView(this),!this.keypath&&this.model.inv&&this.update(!1)},t._Fragment=function(t){var e,n,i,r,o;if(this.parent=t.parent,this.index=t.index,this.items=[],this.indexRefs={},this.parent&&this.parent.parentFragment){r=this.parent.parentFragment.indexRefs;for(o in r)r.hasOwnProperty(o)&&(this.indexRefs[o]=r[o])}for(t.indexRef&&(this.indexRefs[t.indexRef]=t.index),i={root:t.root,parentFragment:this,parent:this,parentNode:t.parentNode,contextStack:t.contextStack},e=t.model?t.model.length:0,n=0;e>n;n+=1)i.model=t.model[n],i.index=n,this.items[this.items.length]=this.createItem(i)},t._sectionUpdate=function(e){var n,i,r,o,s;if(n={model:this.model.frag,root:this.root,parentNode:this.parentNode,parent:this},this.parentNode&&(n.anchor=this.parentFragment.findNextNode(this)),i=t.isArray(e),i&&this.root.modifyArrays&&t.modifyArray(e,this.keypath,this.root.viewmodel),i&&0===e.length&&(r=!0),this.model.inv){if(e&&!r)this.length&&(this.unrender(),this.length=0);else if(!this.length)return n.contextStack=this.contextStack,n.index=0,this.fragments[0]=this.createFragment(n),this.length=1,void 0;return this.postUpdate&&this.postUpdate(),void 0}if(i){if(e.length<this.length)for(s=this.fragments.splice(e.length,this.length-e.length);s.length;)s.pop().teardown();else if(e.length>this.length)for(o=this.length;e.length>o;o+=1)n.contextStack=this.contextStack.concat(this.keypath+"."+o),n.index=o,this.model.i&&(n.indexRef=this.model.i),this.fragments[o]=this.createFragment(n);this.length=e.length}else t.isObject(e)?this.length||(n.contextStack=this.contextStack.concat(this.keypath),n.index=0,this.fragments[0]=this.createFragment(n),this.length=1):e&&!r?this.length||(n.contextStack=this.contextStack,n.index=0,this.fragments[0]=this.createFragment(n),this.length=1):this.length&&(this.unrender(),this.length=0);this.postUpdate&&this.postUpdate()}}(n),function(t){t.on=function(t,e){var n=this;return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){n.off(t,e)}}},t.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},t.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)}}(e.prototype),function(t){t.formatters={equals:function(t,e){return t===e},greaterThan:function(t,e){return t>e},greaterThanEquals:function(t,e){return t>=e},lessThan:function(t,e){return e>t},lessThanEquals:function(t,e){return e>=t}}}(e),function(t){var e,n,i,r;i=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t},t.ViewModel=function(t){this.data=t||{},this.pendingResolution=[],this.observers={},this.dependents=[]},t.ViewModel.prototype={set:function(t,n,o){var s,a,h,d,u,p,c,l,f;if(r(t)){for(s in t)t.hasOwnProperty(s)&&this.set(s,t[s],!0);for(u=this.dependents.length;u--;)for(f=this.dependents[u];f.deferredAttributes.length;)f.deferredAttributes.pop().update().updateDeferred=!1}else{for(this.dependents.forEach(function(e){e.setting||(e.setting=!0,e.fire("set",t,n),e.fire("set:"+t,n),e.setting=!1)}),a=i(t)?t.concat():e(t),l=a.join("."),d=this.data;a.length>1;)h=a.shift(),d[h]||(d[h]=/^[0-9]+$/.test(a[0])?[]:{}),d=d[h];for(h=a[0],d[h]=n,this._notifyObservers(l,n),u=this.pendingResolution.length;u--;)p=this.pendingResolution.splice(u,1)[0],c=this.resolveRef(p.view.model.ref,p.view.contextStack),c?p.callback(c.keypath,c.value):this.registerUnresolvedKeypath(p);if(!o)for(u=this.dependents.length;u--;)for(f=this.dependents[u];f.deferredAttributes.length;)f.deferredAttributes.pop().update().updateDeferred=!1}},get:function(t){var n,r;if(!t)return void 0;for(n=i(t)?t.concat():e(t),r=this.data;n.length;)if(r&&(r=r[n.shift()]),void 0===r)return r;return"function"==typeof r?r.call(this,t):r},update:function(t){var e;if(t)this._notifyObservers(t,this.get(t));else for(e in this.data)this.data.hasOwnProperty(e)&&this._notifyObservers(e,this.get(e))},registerView:function(t){var e,n,i,r,o=this;return t.parentFragment&&t.parentFragment.indexRefs.hasOwnProperty(t.model.ref)?(r=t.parentFragment.indexRefs[t.model.ref],i=t.model.fmtrs?t.root._format(r,t.model.fmtrs):r,t.update(i),void 0):(n=function(e,n){t.keypath=e,t.observerRefs=o.observe({keypath:e,priority:t.model.p||0,view:t}),t.model.fmtrs&&(n=t.root._format(n,t.model.fmtrs)),t.update(n)},e=this.resolveRef(t.model.ref,t.contextStack),e?n(e.keypath,e.value):(t.model.fmtrs&&t.update(t.root._format(void 0,t.model.fmtrs)),this.registerUnresolvedKeypath({view:t,callback:n})),void 0)},resolveRef:function(t,e){var n,i,r;if("."===t)return i=e[e.length-1],r=this.get(i),{keypath:i,value:r};for(e=e.concat();e.length;)if(n=e.pop(),i=n+"."+t,r=this.get(i),void 0!==r)return{keypath:i,value:r};return r=this.get(t),void 0!==r?{keypath:t,value:r}:void 0},registerUnresolvedKeypath:function(t){this.pendingResolution[this.pendingResolution.length]=t},_notifyObservers:function(t,e){var n,i,r,o,s,a=this,h=this.observers[t]||[];for(n=0;h.length>n;n+=1)if(r=h[n])for(i=0;r.length>i;i+=1)o=r[i],s=t!==o.originalAddress?a.get(o.originalAddress):e,o.view.model.fmtrs&&(s=o.view.root._format(s,o.view.model.fmtrs)),o.view.update(s)},observe:function(t){var e,n,i=this,r=t.keypath,o=t.priority,s=[];if(2===arguments.length&&"string"==typeof arguments[0]&&"function"==typeof arguments[1])return this.observe({keypath:arguments[0],callback:arguments[1],priority:0});if(!t.keypath)return void 0;for(n=function(e){var n,a;n=i.observers[e]=i.observers[e]||[],n=n[o]=n[o]||[],a={originalAddress:r},t.view&&(a.view=t.view),t.callback&&(a.callback=t.callback),n[n.length]=a,s[s.length]={keypath:e,priority:o,observer:a}},e=t.keypath;-1!==e.lastIndexOf(".");)n(e),e=e.substr(0,e.lastIndexOf("."));return n(e),s},unobserve:function(t){var e,n,i,r,o;if(e=this.observers[t.keypath],e&&(n=e[t.priority])){if(n.indexOf)i=n.indexOf(t.observer);else for(r=0,o=n.length;o>r;r+=1)if(n[r]===t.observer){i=r;break}-1!==i&&(n.splice(i,1),0===n.length&&delete e[t.priority],0===e.length&&delete this.observers[t.keypath])}},unobserveAll:function(t){for(;t.length;)this.unobserve(t.shift())}},t.ViewModel.prototype.cancelKeypathResolution=Array.prototype.filter?function(t){this.pendingResolution=this.pendingResolution.filter(function(e){return e.view!==t})}:function(t){var e,n=[];for(e=0;this.pendingResolution.length>e;e+=1)this.pendingResolution[e].view!==t&&(n[n.length]=this.pendingResolution[e]);this.pendingResolution=n},n=/\[\s*([0-9]+)\s*\]/g,e=function(t){var e;return e=t.replace(n,".$1"),e.split(".")}}(e),function(t,e){var n,i,r,o,s,a,h,d,u,p,c;n=e.types,o={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},r="undefined"!=typeof window?window.document:null,i=function(t,e){var n,i=[];for(n=r.createElement("div"),n.innerHTML=t;n.firstChild;)i[i.length]=n.firstChild,e.appendChild(n.firstChild);return i},e.DomFragment=function(t){return this.docFrag=r.createDocumentFragment(),"string"==typeof t.model?(this.nodes=i(t.model,this.docFrag),void 0):(e._Fragment.call(this,t),void 0)},e.DomFragment.prototype={createItem:function(t){if("string"==typeof t.model)return new s(t,this.docFrag);switch(t.model.type){case n.INTERPOLATOR:return new u(t,this.docFrag);case n.SECTION:return new c(t,this.docFrag);case n.TRIPLE:return new p(t,this.docFrag);case n.ELEMENT:return new a(t,this.docFrag);case n.PARTIAL:return new h(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(){var t;if(this.nodes)for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);else for(;this.items.length;)this.items.pop().teardown()},firstNode:function(){return this.items[0]?this.items[0].firstNode():null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():null}},h=function(t,n){this.fragment=new e.DomFragment({model:t.root.partials[t.model.ref]||[],root:t.root,parentNode:t.parentNode,contextStack:t.contextStack,parent:this}),n.appendChild(this.fragment.docFrag)},h.prototype={teardown:function(){this.fragment.teardown()}},s=function(t,e){this.node=r.createTextNode(t.model),this.root=t.root,this.parentNode=t.parentNode,e.appendChild(this.node)},s.prototype={teardown:function(){this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},a=function(t,n){var i,o,s,a,h,u,p;if(i=this.model=t.model,this.root=t.root,this.viewmodel=t.root.viewmodel,this.parentFragment=t.parentFragment,this.parentNode=t.parentNode,this.index=t.index,i.attrs&&i.attrs.xmlns){if(o=i.attrs.xmlns,"string"!=typeof o)throw"Namespace attribute cannot contain mustaches"}else o=this.parentNode.namespaceURI;this.node=r.createElementNS(o,i.tag),i.frag&&("string"==typeof i.frag?this.node.innerHTML=i.frag:(this.children=new e.DomFragment({model:i.frag,root:t.root,parentNode:this.node,contextStack:t.contextStack,parent:this}),this.node.appendChild(this.children.docFrag))),this.attributes=[],u=[];for(a in i.attrs)i.attrs.hasOwnProperty(a)&&(h=i.attrs[a],s=new d({parent:this,name:a,value:void 0===h?null:h,root:t.root,parentNode:this.node,contextStack:t.contextStack}),this.attributes[this.attributes.length]=s,s.isBindable&&u.push(s),s.isTwowayNameAttr?p=s:s.update());for(;u.length;)u.pop().bind(this.root.lazy);p&&(p.updateViewModel(),p.update()),n.appendChild(this.node)},a.prototype={teardown:function(){for(this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node),this.children&&this.children.teardown();this.attributes.length;)this.attributes.pop().teardown()},firstNode:function(){return this.node}},d=function(t){var n,i,r,s,a,h,d,u;if(n=t.name,i=t.value,this.parent=t.parent,r=n.indexOf(":"),-1!==r&&(s=n.substr(0,r),"xmlns"!==s&&(n=n.substring(r+1),this.namespace=e.namespaces[s],!this.namespace)))throw'Unknown namespace ("'+s+'")';return null===i||"string"==typeof i?(this.namespace?t.parentNode.setAttributeNS(this.namespace,n,i):t.parentNode.setAttribute(n,i),void 0):(this.root=t.root,this.parentNode=t.parentNode,this.name=n,this.children=[],this.namespace||t.parentNode.namespaceURI!==e.namespaces.html||(d=this.name.toLowerCase(),u=o[d]?o[d]:d,void 0!==t.parentNode[u]&&(this.propertyName=u),("boolean"==typeof t.parentNode[u]||"value"===u)&&(this.useProperty=!0)),this.parentFragment=this.parent.parentFragment,this.fragment=new e.TextFragment({model:i,root:this.root,parent:this,contextStack:t.contextStack}),1===this.fragment.items.length&&(this.selfUpdating=!0),this.root.twoway&&(a=this.parent.model.tag.toLowerCase(),h=!("name"!==u&&"value"!==u&&"checked"!==u||"input"!==a&&"textarea"!==a&&"select"!==a)),h&&(this.isBindable=!0,"name"===u&&(this.isTwowayNameAttr=!0)),this.ready=!0,this.isTwowayNameAttr||this.update(),void 0)},d.prototype={bind:function(t){var n,i=this,r=this.root.viewmodel,o=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==e.types.INTERPOLATOR)throw"Not a valid two-way data binding candidate - must be a single interpolator";this.interpolator=this.fragment.items[0],n=this.interpolator.keypath||this.interpolator.model.ref,"checkbox"===o.type||"radio"===o.type?"name"===this.propertyName?(o.name="{{"+n+"}}",this.updateViewModel=function(){o.checked&&r.set(n,o.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){r.set(n,o.checked)}):this.updateViewModel=function(){var t;t=i.interpolator.model.fmtrs?i.root._format(o.value,i.interpolator.model.fmtrs):o.value,"0"===t?t=0:""!==t&&(t=+t||t),r.set(n,t)},this.updateViewModel&&(this.twoway=!0,o.addEventListener("change",this.updateViewModel),o.addEventListener("click",this.updateViewModel),o.addEventListener("blur",this.updateViewModel),t||(o.addEventListener("keyup",this.updateViewModel),o.addEventListener("keydown",this.updateViewModel),o.addEventListener("keypress",this.updateViewModel),o.addEventListener("input",this.updateViewModel)))},teardown:function(){if(this.updateViewModel&&(this.node.removeEventListener("change",this.updateViewModel),this.node.removeEventListener("click",this.updateViewModel),this.node.removeEventListener("blur",this.updateViewModel),this.node.removeEventListener("keyup",this.updateViewModel),this.node.removeEventListener("keydown",this.updateViewModel),this.node.removeEventListener("keypress",this.updateViewModel),this.node.removeEventListener("input",this.updateViewModel)),this.children)for(;this.children.length;)this.children.pop().teardown()},bubble:function(){this.selfUpdating?this.update():this.updateDeferred||(this.root.deferredAttributes[this.root.deferredAttributes.length]=this,this.updateDeferred=!0)},update:function(){var t,e;if(!this.ready)return this;if(this.twoway){if(e=this.name.toLowerCase(),this.value=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=this.value===this.parentNode.value?!0:!1,this;if(r.activeElement===this.parentNode)return this}return t=this.fragment.getValue(),void 0===t&&(t=""),this.useProperty?(this.parentNode[this.propertyName]=t,this):this.namespace?(this.parentNode.setAttributeNS(this.namespace,this.name,t),this):(this.parentNode.setAttribute(this.name,t),this)}},u=function(t,n){this.node=r.createTextNode(""),n.appendChild(this.node),e._Mustache.call(this,t)},u.prototype={teardown:function(){this.observerRefs?this.viewmodel.unobserveAll(this.observerRefs):this.viewmodel.cancelKeypathResolution(this),this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},update:function(t){t!==this.text&&(this.text=t,this.node.data=t)},firstNode:function(){return this.node}},p=function(t,n){this.nodes=[],this.docFrag=r.createDocumentFragment(),this.initialising=!0,e._Mustache.call(this,t),n.appendChild(this.docFrag),this.initialising=!1},p.prototype={teardown:function(){if(this.root.el.contains(this.parentNode))for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.observerRefs?this.viewmodel.unobserveAll(this.observerRefs):this.viewmodel.cancelKeypathResolution(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},update:function(t){if(t!==this.html){for(this.html=t;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.nodes=i(t,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}}},c=function(t,n){this.fragments=[],this.length=0,this.docFrag=r.createDocumentFragment(),this.initialising=!0,e._Mustache.call(this,t),n.appendChild(this.docFrag),this.initialising=!1},c.prototype={teardown:function(){this.unrender(),this.observerRefs?this.viewmodel.unobserveAll(this.observerRefs):this.viewmodel.cancelKeypathResolution(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown()},update:function(t){e._sectionUpdate.call(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var n=new e.DomFragment(t);return this.docFrag.appendChild(n.docFrag),n}}}(e,n),function(t){var e,n,i,r,o;e=t.types,t.TextFragment=function(e){t._Fragment.call(this,e)},t.TextFragment.prototype={createItem:function(t){if("string"==typeof t.model)return new n(t.model);switch(t.model.type){case e.INTERPOLATOR:return new i(t);case e.TRIPLE:return new r(t);case e.SECTION:return new o(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.value=this.getValue(),this.parent.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&(t=this.items[0].value,void 0!==t)?t:""+this},toString:function(){return this.items.join("")}},n=function(t){this.text=t},n.prototype={toString:function(){return this.text},teardown:function(){}},i=function(e){t._Mustache.call(this,e)},i.prototype={update:function(t){this.value=t,this.parent.bubble()},teardown:function(){this.observerRefs?this.viewmodel.unobserveAll(this.observerRefs):this.viewmodel.cancelKeypathResolution(this)},toString:function(){return void 0===this.value?"":this.value}},r=i,o=function(e){this.fragments=[],this.length=0,t._Mustache.call(this,e)},o.prototype={teardown:function(){this.unrender(),this.observerRefs?this.viewmodel.unobserveAll(this.observerRefs):this.viewmodel.cancelKeypathResolution(this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parent.bubble()},update:function(e){t._sectionUpdate.call(this,e)},createFragment:function(e){return new t.TextFragment(e)},postUpdate:function(){this.value=this.fragments.join(""),this.parent.bubble()},toString:function(){return this.fragments.join("")}}}(n),function(t){t.extend=function(e){var n,i,r;n=this,i=function(){t.apply(this,arguments),this.init&&this.init.apply(this,arguments)};for(r in n.prototype)n.prototype.hasOwnProperty(r)&&(i.prototype[r]=n.prototype[r]);for(r in e)if(e.hasOwnProperty(r)){if(t.prototype.hasOwnProperty(r))throw Error('Cannot override "'+r+'" method or property of Ractive prototype');i.prototype[r]=e[r]}return i.extend=n.extend,i}}(e),function(t){var e;t.modifyArray=function(t,n,i){var r,o,s,a;t._ractive?(r=t._ractive.viewmodels,o=t._ractive.keypathsByIndex,s=r.indexOf(i),-1===s&&(s=r.length,r[s]=i),a=o[s],-1===a.indexOf(n)&&(a[a.length]=n)):(t._ractive={viewmodels:[i],keypathsByIndex:[[n]]},e(t))},e=function(t){var e=function(t){var e,n;e=t._ractive.viewmodels,n=t._ractive.keypathsByIndex,e.forEach(function(e,i){var r=n[i];r.forEach(function(n){e.set(n,t)})})};["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(n){t[n]=function(){var i=Array.prototype[n].apply(this,arguments);return e(t),i}})}}(n),function(t){t.easing={easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return 1>(t/=.5)?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return 1>(t/=.5)?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return 1>(t/=.5)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*2*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}}}(e),function(t){var e,n,i;i="undefined"!=typeof window?window:{},function(t,e){var n;for(n=0;t.length>n&&!i.requestAnimationFrame;++n)i.requestAnimationFrame=i[t[n]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[t[n]+"CancelAnimationFrame"]||i[t[n]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(t){var n,r,o;return n=Date.now(),r=Math.max(0,16-(n-e)),o=i.setTimeout(function(){t(n+r)},r),e=n+r,o}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){i.clearTimeout(t)})}(["ms","moz","webkit","o"],0,i),e=function(e){var n;this.startTime=Date.now();for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.interpolator=t.interpolate(this.from,this.to),this.running=!0},n={animations:[],tick:function(){var t,e;for(t=0;this.animations.length>t;t+=1)e=this.animations[t],e.tick()||this.animations.splice(t--,1);this.animations.length?i.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){n.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},e.prototype={tick:function(){var t,e,n,i;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.viewmodel.set(this.keypath,this.to),this.complete&&this.complete(1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.viewmodel.set(this.keypath,n),this.step&&this.step(e,n),!0)):!1},stop:function(){this.running=!1}},t.prototype.animate=function(i,r,o){var s,a,h,d;for(o=o||{},d=n.animations.length;d--;)n.animations[d].keypath===i&&n.animations[d].stop();o.easing&&(s="function"==typeof o.easing?o.easing:this.easing&&this.easing[o.easing]?this.easing[o.easing]:t.easing[o.easing],"function"!=typeof s&&(s=null)),a=void 0===o.duration?400:o.duration,h=new e({keypath:i,from:this.get(i),to:r,viewmodel:this.viewmodel,duration:a,easing:s,step:o.step,complete:o.complete}),n.push(h)}}(e),function(t,e){t.interpolate=function(n,i){if(e.isNumeric(n)&&e.isNumeric(i))return t.interpolators.number(+n,+i);if(e.isArray(n)&&e.isArray(i))return t.interpolators.array(n,i);if(e.isObject(n)&&e.isObject(i))return t.interpolators.object(n,i);throw Error("Could not interpolate values")},t.interpolators={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(e,n){var i,r,o,s;for(i=[],r=[],s=o=Math.min(e.length,n.length);s--;)r[s]=t.interpolate(e[s],n[s]);for(s=o;e.length>s;s+=1)i[s]=e[s];for(s=o;n.length>s;s+=1)i[s]=n[s];return function(t){for(var e=o;e--;)i[e]=r[e](t);return i}},object:function(e,n){var i,r,o,s,a=[];o={},r={};for(s in e)e.hasOwnProperty(s)&&(n.hasOwnProperty(s)?(a[a.length]=s,r[s]=t.interpolate(e[s],n[s])):o[s]=e[s]);for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(o[s]=n[s]);return i=a.length,function(t){for(var e,n=i;n--;)e=a[n],o[e]=r[e](t);return o}}}}(e,n),n.namespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e})(this);